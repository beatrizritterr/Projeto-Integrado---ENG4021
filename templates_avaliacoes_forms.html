{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
  .star-rating {
    direction: rtl;
    display: inline-flex;
    justify-content: flex-end;
  }
  .star-rating input {
    display: none;
  }
  .star-rating label {
    font-size: 1.8rem;
    color: #ccc;
    cursor: pointer;
    transition: color 0.2s;
    margin: 0 2px;
  }
  .star-rating input:checked ~ label,
  .star-rating label:hover,
  .star-rating label:hover ~ label {
    color: #f5c518;
  }
  .avaliacao-geral i {
    color: #f5c518;
    margin-right: 3px;
  }
</style>

<div class="container mt-4">
  <div class="text-center mb-4">
    <img src="file:///C:/Users/Bernardo/Downloads/Logo%20digital%20_VINCULOU_%20em%20vetor.png" alt="Logo" style="height:60px;">
    <h2 class="mt-3 fw-bold">Avaliação das Disciplinas – PUC-Rio</h2>
  </div>

  {% for d in disciplinas %}
    <div class="card mb-4 shadow-sm border-0">
      <div class="card-body">
        <h5 class="card-title mb-1">{{ d.codigo }} - {{ d.nome }}</h5>
        <p class="text-muted">Professores: {{ d.professores }}</p>

        <form method="post" class="avaliacao-form mt-3">
          {% csrf_token %}
          <input type="hidden" name="disciplina_id" value="{{ d.id }}">

          <!-- Seção de estrelas -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Sua Avaliação:</label><br>
            <div class="star-rating">
              {% for i in "54321" %}
                <input type="radio" id="star{{ i }}-{{ d.id }}" name="nota" value="{{ i }}">
                <label for="star{{ i }}-{{ d.id }}">&#9733;</label>
              {% endfor %}
            </div>
          </div>

          <!-- Campo de comentário -->
          <div class="mb-3">
            <textarea name="comentario" class="form-control" rows="2" placeholder="Deixe um comentário (opcional)"></textarea>
          </div>

          <button type="submit" class="btn btn-primary w-100">Enviar Avaliação</button>
        </form>

        <!-- Avaliação geral simulada -->
        <div class="mt-3 avaliacao-geral">
          <strong>Avaliação Geral:</strong>
          {% for i in "12345" %}
            {% if forloop.counter <= d.media_geral %}
              <i class="bi bi-star-fill"></i>
            {% else %}
              <i class="bi bi-star"></i>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

{% endblock %}